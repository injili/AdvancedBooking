<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Booking</title>

    <!--CSS links-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}" type="text/css">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

    <style>
        body{
            height: 100vh;
        }
        .theeform {
             background-color: #ffffff;
             display: flex;
             align-items: center;
             justify-content: center;
             height: 100vh;
             margin: 0;
             margin-top: 200px;
         }
 

        .container {
            padding: 20px;
            border-radius: 7px;
            box-shadow:  20px 20px 60px #b6b6b6,
                        -20px -20px 60px #f6f6f6;
            max-width: 700px;
            width: 100%;
            margin-top: 40px;
            margin-bottom: 40px;
            margin-left: 10px;
            margin-right: 10px;
        }

        .thecontainer {
            padding: 20px;
            border-radius: 7px;
            box-shadow:  20px 20px 60px #b6b6b6,
                         -20px -20px 60px #f6f6f6;
            max-width: 700px;
            width: 100%;
        }
 
        form { 
             margin: 0 auto;
        }

        h2 {
             text-align: center;
             color: #333;
        }
 
        .form-outline {
             margin-bottom: 2px;
        }
 
        .form-control:focus {
             border-color: #ffffff;
             box-shadow: 0 0 0 0.25rem rgba(255, 255, 255, 0.25);
        }
 
        .form-group {
             display: flex;
             gap: 10px;
        }
 
        .form-outline {
             flex: 1;
        }
        .btn {
            margin-top: 10px;
            padding-top: none;
            border-radius: 5px;
            width: auto;
            background-color: rgb(21, 20, 20);
            color: #f6f6f6;
        }
        .form-step {
            display: none;
        }

     </style>
</head>
<body>
    <section class="theeform">
        <form action="/add" method="POST">
            <div class="container theecontainer text-left" data-aos="fade-down-left" data-aos-duration="1000" id="step-1">
                <h3>Check Availability</h3>
                <div class="form-group">
                    <div class="form-outline mb-2">
                        <label for="checkin">Check in</label>
                        <input type="date" id="checkin" name="checkin" class="form-control" required>
                    </div>

                    <div class="form-outline mb-2">
                        <label for="checkout">Check out</label>
                        <input type="date" id="checkout" name="checkout" class="form-control" required>
                    </div>

                    <button class="btn" type="button" onclick="nextStep(1)">CHECK AVAILABILITY</button>
                </div>
            </div>


            <div class="container theecontainer text-left form-step" data-aos="fade-down-left" data-aos-duration="1000" id="step-2">
                <div class="form-group">
                    <div class="form-outline mb-2">
                        <label for="no_rooms">Number of Rooms</label>
                        <input type="number" id="no_rooms" name="no_rooms" min="1" max="12" value="1" class="form-control" required>
                    </div>

                    <button class="btn" type="button" onclick="updateConfig()">NEXT</button>
                </div>
            </div>

            <div id="room-configurations"></div>

            <div class="container theecontainer text-left form-step" data-aos="fade-down-left" data-aos-duration="1000" id="step-4">
                <div class="form-group">
                    <div class="form-outline mb-2">
                        <label for="cost">Total</label>
                        <input type="number" id="cost" name="cost" class="form-control" required>
                    </div>
                    
                    <button class="btn" type="button" onclick="nextStep(4)">MAKE RESERVATION</button>
                </div>
            </div>


            <div class="container theecontainer text-left form-step" data-aos="fade-down-left" data-aos-duration="1000" id="step-5">
                <h3>Personal Information</h3>
                <div class="form-group">
                    <div class="form-outline mb-2">
                        <label for="fname">First Name</label>
                        <input type="text" id="fname" name="fname" class="form-control" placeholder="John" required>
                    </div>
        
                    <div class="form-outline mb-2">
                        <label for="lname">Last Name</label>
                        <input type="text" id="lname" name="lname" class="form-control" placeholder="Doe" required>
                    </div>
                </div>
    
                <div class="form-outline mb-2">
                    <label for="email">Email Address</label>
                    <input type="email" id="email" name="email" class="form-control" placeholder="example@gmail.com" required>
                    <small id="emailError" style="color: red;"></small>
                </div>
    
                <div class="form-outline mb-2">
                    <label for="contact">Phone Number</label>
                    <input type="tel" id="contact" name="phone_no" pattern="\+254\d{9}"  placeholder="123456789" class="form-control" value="+254" maxlength="13" minlength="13" required>
                    <div id="phoneError" class="text-danger"></div>
                </div>

                <div class="form-group">
                    <div class="form-outline mb-2">
                        <label for="nationality">Nationality</label>
                        <input type="text" id="nationality" name="nationality" class="form-control" required>
                    </div>
        
                    <div class="form-outline mb-2">
                        <label for="pass">ID/Passport Number</label>
                        <input type="text" id="pass" name="pass" class="form-control" required>
                    </div>
                </div>

                <div class="form-outline mb-2">
                    <label for="gender">Gender</label>
                    <select id="gender" name="gender" class="form-control" onchange="updateMaxRooms()" required>
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                    </select>
                </div>

                <button class="btn" type="button" onclick="nextStep(2)">PAY</button>
            </div-->
            
        </form>
    </section>
    <script>
        function nextStep(step) {
            const nextStep = document.getElementById(`step-${step + 1}`);
            nextStep.style.display = "block";
        }

        function updateConfig() {
            const noRooms = parseInt(document.getElementById('no_rooms').value);
            const roomConfigurationsContainer = document.getElementById('room-configurations');

            // Clear previous configurations
            roomConfigurationsContainer.innerHTML = '';

            // Generate room configurations based on the number of rooms
            for (let i = 1; i <= noRooms; i++) {
                const roomConfiguration = `

                    <div class="container theecontainer text-left" data-aos="fade-down-left" data-aos-duration="1000">
                    <h3>Room ${i}</h3>
                    <div class="form-group">
                        <div class="form-outline mb-2">
                            <label for="adults">Adults</label>
                            <input type="number" id="adults" name="adults" min="0" max="2" class="form-control">
                        </div>

                        <div class="form-outline mb-2">
                            <label for="preeteens">Preteens</label>
                            <input type="number" id="preteens" name="preteens" min="0" max="2" class="form-control">
                        </div>

                        <div class="form-outline mb-2">
                            <label for="kids">Kids</label>
                            <input type="number" id="kids" name="kids" min="0" max="2" class="form-control">
                        </div>

                        <div class="form-outline mb-2">
                            <label for="infants">Infants</label>
                            <input type="number" id="infants" name="infants" min="0" max="2" class="form-control">
                        </div>

                        <div class="form-outline mb-2">
                            <label for="meal">Meal Plan</label>
                            <select id="meal" name="meal" class="form-control" onchange="" required>
                                <option value="bandb">B&B</option>
                                <option value="fullboard">Full Board</option>
                                <option value="halfboard">Half Board</option>
                                <option value="dayroom">Day Room</option>
                            </select>
                        </div>

                        </div>
                        ${i === noRooms ? '<button class="btn" type="button" onclick="nextStep(3)">NEXT</button>' : ''}

                    </div>
                `;

                roomConfigurationsContainer.innerHTML += roomConfiguration;
            }
        }

        document.addEventListener('DOMContentLoaded', function () {
            // Get references to the input fields
            const adultsInput = document.getElementById('adults');
            const preteensInput = document.getElementById('preteens');
            const kidsInput = document.getElementById('kids');

            // Add event listeners to each input field
            adultsInput.addEventListener('input', function () {
                updateMaxValues(adultsInput);
            });

            preteensInput.addEventListener('input', function () {
                updateMaxValues(preteensInput);
            });

            kidsInput.addEventListener('input', function () {
                updateMaxValues(kidsInput);
            });

            // Function to update max values
            function updateMaxValues(changedInput) {
                // Get the current value of the changed input
                const currentValue = parseInt(changedInput.value);

                // Set the new max values for other input fields
                [adultsInput, preteensInput, kidsInput].forEach(otherInput => {
                    if (otherInput !== changedInput) {
                        otherInput.max = 2 - currentValue;
                    }
                });
            }
        });

    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>  
    <script src="https://code.jquery.com/jquery-3.6.1.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"> 
    </script> 
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"> 
    </script> 
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"> 
    </script> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"> 
    </script> 
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init();
    </script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>